#!/bin/python3

import subprocess
import argparse
import shlex

def arguments():
	parser = argparse.ArgumentParser(
			description="""
««EXTRACT INFORMATIONS»»
""",
			formatter_class=argparse.RawDescriptionHelpFormatter)
	parser.add_argument('-f', '--file',required=True,help='spicify file within URLs or links')
	parser.add_argument('-v', '--verbose',action='store_true',help='verbose mode')
	args = parser.parse_args()
	return args

def execute(url):
	try:
		host = url.split("https://")[1]
		host = host.split("/")[0]
	except:
		host = url.split("http://")[1]
		host = host.split("/")[0]
	comando = f"""curl --path-as-is -i -v -k -X $'GET' \
	-H $'Host: {host}' -H $'Sec-Ch-Ua: \"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\"' -H $'Sec-Ch-Ua-Mobile: ?0' -H $'Sec-Ch-Ua-Platform: \"Linux\"' -H $'Accept-Language: en-US,en;q=0.9' -H $'Upgrade-Insecure-Requests: 1' -H $'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.6723.70 Safari/537.36' -H $'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7' -H $'Sec-Fetch-Site: none' -H $'Sec-Fetch-Mode: navigate' -H $'Sec-Fetch-User: ?1' -H $'Sec-Fetch-Dest: document' -H $'Accept-Encoding: gzip, deflate, br' -H $'Priority: u=0, i' -H $'Connection: keep-alive' \
	$'{url}'
 """
	args = shlex.split(comando)
	resultado = subprocess.run(args, capture_output=True, text=True)
	return resultado, resultado.stdout, resultado.stderr

def main():
	args = arguments()
	with open(args.file, 'r') as file:
			listURL = file.read()
	listURL = listURL.split("\n")
	listIP= {}
	with open(f'IPs of url', "w") as file:
		for url in listURL:
			try:
				resultado, saida, error = execute(url)
				print(resultado)
			except Exception as erro:
				print(f'erro {erro}')
				continue
if __name__=="__main__":main();
